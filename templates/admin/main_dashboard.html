<!-- 
  *templates/admin/main_dashboard.html 
  *Version 2.0
  -->
{% extends 'admin/admin_base.html' %}
{% load static %}

{% block admin_content %}
  <div class="admin-dashboard">
    
    <!-- Overview Metrics -->
    <div class="metrics-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- DataLogs Metrics -->
      <div class="admin-metric-card glass-card">
        <div class="metric-header">
          <div class="metric-icon text-purple-400">
            <i class="fas fa-database"></i>
          </div>
          <div class="metric-value text-right">
            <div class="value">{{ blog_stats.total_posts }}</div>
            <div class="metric-title">Total DataLogs</div>
          </div>
        </div>
        <div class="metric-breakdown text-sm text-gray-400 mt-4">
          <div class="flex justify-between">
            <span>Published:</span>
            <span class="text-green-400">{{ blog_stats.published_posts }}</span>
          </div>
          <div class="flex justify-between">
            <span>Drafts:</span>
            <span class="text-yellow-400">{{ blog_stats.draft_posts }}</span>
          </div>
        </div>
      </div>

      <!-- Systems Metrics -->
      <div class="admin-metric-card glass-card">
        <div class="metric-header">
          <div class="metric-icon text-cyan-400">
            <i class="fas fa-project-diagram"></i>
          </div>
          <div class="metric-value text-right">
            <div class="value">{{ projects_stats.total_systems }}</div>
            <div class="metric-title">Total Systems</div>
          </div>
        </div>
        <div class="metric-breakdown text-sm text-gray-400 mt-4">
          <div class="flex justify-between">
            <span>Deployed:</span>
            <span class="text-green-400">{{ projects_stats.deployed_systems }}</span>
          </div>
          <div class="flex justify-between">
            <span>In Development:</span>
            <span class="text-blue-400">{{ projects_stats.in_dev_systems }}</span>
          </div>
        </div>
      </div>

      <!-- Categories & Types -->
      <div class="admin-metric-card glass-card">
        <div class="metric-header">
          <div class="metric-icon text-emerald-400">
            <i class="fas fa-tags"></i>
          </div>
          <div class="metric-value text-right">
            <div class="value">{{ blog_stats.total_categories }}</div>
            <div class="metric-title">Categories</div>
          </div>
        </div>
        <div class="metric-breakdown text-sm text-gray-400 mt-4">
          <div class="flex justify-between">
            <span>System Types:</span>
            <span class="text-cyan-400">{{ projects_stats.total_system_types }}</span>
          </div>
          <div class="flex justify-between">
            <span>Tags:</span>
            <span class="text-purple-400">{{ blog_stats.total_tags }}</span>
          </div>
        </div>
      </div>

      <!-- Technologies -->
      <div class="admin-metric-card glass-card">
        <div class="metric-header">
          <div class="metric-icon text-orange-400">
            <i class="fas fa-cogs"></i>
          </div>
          <div class="metric-value text-right">
            <div class="value">{{ projects_stats.total_technologies }}</div>
            <div class="metric-title">Technologies</div>
          </div>
        </div>
        <div class="metric-breakdown text-sm text-gray-400 mt-4">
          <div class="text-center">
            <span class="text-orange-400">Technology Stack Items</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      
      <!-- DataLogs Quick Actions -->
      <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold text-white flex items-center">
            <i class="fas fa-database mr-2 text-purple-400"></i>
            DataLogs Management
          </h3>
          <a href="/blog/admin/" class="btn btn-sm btn-purple">
            <i class="fas fa-external-link-alt mr-1"></i>
            Open
          </a>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <a href="/blog/admin/posts/create/" class="admin-quick-action">
            <i class="fas fa-plus-circle text-green-400 mb-2"></i>
            <span>New DataLog</span>
          </a>
          <a href="/blog/admin/posts/" class="admin-quick-action">
            <i class="fas fa-edit text-blue-400 mb-2"></i>
            <span>Manage Posts</span>
          </a>
          <a href="/blog/admin/categories/" class="admin-quick-action">
            <i class="fas fa-folder text-orange-400 mb-2"></i>
            <span>Categories</span>
          </a>
          <a href="/blog/admin/tags/" class="admin-quick-action">
            <i class="fas fa-tags text-purple-400 mb-2"></i>
            <span>Tags</span>
          </a>
        </div>
      </div>

      <!-- Systems Quick Actions -->
      <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold text-white flex items-center">
            <i class="fas fa-project-diagram mr-2 text-cyan-400"></i>
            Systems Management
          </h3>
          <a href="/projects/admin/" class="btn btn-sm btn-cyan">
            <i class="fas fa-external-link-alt mr-1"></i>
            Open
          </a>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <a href="/projects/admin/systems/create/" class="admin-quick-action">
            <i class="fas fa-plus-circle text-green-400 mb-2"></i>
            <span>New System</span>
          </a>
          <a href="/projects/admin/systems/" class="admin-quick-action">
            <i class="fas fa-server text-blue-400 mb-2"></i>
            <span>Manage Systems</span>
          </a>
          <a href="/projects/admin/technologies/" class="admin-quick-action">
            <i class="fas fa-cogs text-orange-400 mb-2"></i>
            <span>Technologies</span>
          </a>
          <a href="/projects/admin/system-types/" class="admin-quick-action">
            <i class="fas fa-sitemap text-cyan-400 mb-2"></i>
            <span>System Types</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      
      <!-- Recent DataLogs -->
      <div class="glass-card p-6">
        <h3 class="text-xl font-bold text-white mb-6 flex items-center">
          <i class="fas fa-clock mr-2 text-purple-400"></i>
          Recent DataLogs
        </h3>
        
        {% if recent_posts %}
          <div class="space-y-4">
            {% for post in recent_posts %}
              <div class="admin-recent-item">
                <div class="flex items-start justify-between">
                  <div class="flex-1">
                    <h4 class="font-medium text-white">{{ post.title }}</h4>
                    <p class="text-sm text-gray-400 mt-1">
                      {{ post.category.name }} • {{ post.created_at|date:"M j, Y" }}
                    </p>
                  </div>
                  <div class="flex items-center space-x-2 ml-4">
                    <span class="status-badge status-{{ post.status }}">
                      {{ post.get_status_display }}
                    </span>
                    <a href="/blog/admin/posts/{{ post.pk }}/edit/" class="text-blue-400 hover:text-blue-300">
                      <i class="fas fa-edit"></i>
                    </a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-gray-400 text-center py-8">No DataLogs yet. Create your first one!</p>
        {% endif %}
      </div>

      <!-- Recent Systems -->
      <div class="glass-card p-6">
        <h3 class="text-xl font-bold text-white mb-6 flex items-center">
          <i class="fas fa-clock mr-2 text-cyan-400"></i>
          Recent Systems
        </h3>
        
        {% if recent_systems %}
          <div class="space-y-4">
            {% for system in recent_systems %}
              <div class="admin-recent-item">
                <div class="flex items-start justify-between">
                  <div class="flex-1">
                    <h4 class="font-medium text-white">{{ system.title }}</h4>
                    <p class="text-sm text-gray-400 mt-1">
                      {% if system.system_type %}{{ system.system_type.name }} • {% endif %}
                      {{ system.updated_at|date:"M j, Y" }}
                    </p>
                  </div>
                  <div class="flex items-center space-x-2 ml-4">
                    <span class="status-badge status-{{ system.status }}">
                      {{ system.get_status_display }}
                    </span>
                    <a href="/projects/admin/systems/{{ system.pk }}/edit/" class="text-blue-400 hover:text-blue-300">
                      <i class="fas fa-edit"></i>
                    </a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-gray-400 text-center py-8">No Systems yet. Create your first one!</p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}

{% block admin_css %}
<style>
.metrics-grid .admin-metric-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.admin-quick-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.5rem 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.75rem;
  text-decoration: none;
  color: var(--text-secondary);
  transition: all 0.3s ease;
}

.admin-quick-action:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
  transform: translateY(-2px);
}

.admin-quick-action i {
  font-size: 1.5rem;
}

.admin-recent-item {
  padding: 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  transition: all 0.3s ease;
}

.admin-recent-item:hover {
  background: rgba(255, 255, 255, 0.06);
}

.status-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.status-published, .status-deployed {
  background: rgba(34, 197, 94, 0.2);
  color: rgb(34, 197, 94);
}

.status-draft, .status-in_development {
  background: rgba(234, 179, 8, 0.2);
  color: rgb(234, 179, 8);
}

.status-testing {
  background: rgba(59, 130, 246, 0.2);
  color: rgb(59, 130, 246);
}
</style>
{% endblock %}