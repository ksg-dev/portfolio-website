{% load static %}

<nav class="navbar navbar-expand-lg subnav-glass" style="margin-top: 2rem; background: rgba(13, 13, 31, 0.4); backdrop-filter: blur(20px); border-radius: var(--border-radius-xl); padding: var(--spacing-sm) var(--spacing-md); width: 100%;">
    <div class="container-fluid">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

            {% for link in links %}
            <li class="nav-item {% if link.dropdown %}dropdown{% endif %}">
                {% if link.dropdown %}
                <a class="nav-link dropdown-toggle" href="#" id="{{ link.id }}" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    {{ link.label }}
                </a>
                <ul class="dropdown-menu" aria-labelledby="{{ link.id }}">
                    {% for sub in link.dropdown %}
                    <li><a class="dropdown-item" href="{{ sub.href }}">{{ sub.label }}</a></li>
                    {% endfor %}
                </ul>
                {% else %}
                <a class="nav-link" href="{{ link.href }}">
                    {{ link.label }}{% if link.badge %} <span class="badge bg-info text-dark ms-1">{{ link.badge }}</span>{% endif %}
                </a>
                {% endif %}
            </li>
            {% endfor %}

            <!-- Search Toggle always last -->
            <li class="nav-item">
                <a class="nav-link" href="#" id="toggleSearch">Search</a>
            </li>
        </ul>
    </div>
</nav>

<script>
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("toggleSearch").addEventListener("click", function (e) {
        e.preventDefault();
        const searchBar = document.querySelector(".search-terminal");
        if (searchBar) {
            searchBar.style.display = searchBar.style.display === "none" ? "block" : "none";
        }
    });
});
</script>
