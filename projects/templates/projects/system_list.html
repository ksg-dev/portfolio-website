<!----
 * AURA Portfolio - Enhanced System List Template
 * Using Unified Container Styling & Enhanced Model Methods
 * Version: 3.4.0 - Complete System Showcase
---->

{% extends "projects/systems_base.html" %}
{% load static %}
{% load aura_filters %}
{% load aura_components %}
{% load system_tags %}

{% block systems_title %}All Systems{% endblock %}
{% block systems_body_class %}systems-list enhanced-list{% endblock %}

{% block systems_css %}
<link rel="stylesheet" href="{% static 'projects/css/enhanced_dashboard.css' %}">
<link rel="stylesheet" href="{% static 'projects/css/systems-unified.css' %}">
<link rel="stylesheet" href="{% static 'projects/css/systems-components.css' %}">
<style>
/* Enhanced System List Specific Styles */
.systems-list-layout {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: var(--spacing-xl, 2rem);
    align-items: flex-start;
}

.systems-sidebar {
    position: sticky;
    top: var(--spacing-xl, 2rem);
    max-height: calc(100vh - var(--spacing-xxl, 4rem));
    overflow-y: auto;
}

.systems-main-content {
    min-width: 0;
}

.systems-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: var(--spacing-xl, 2rem);
    margin-bottom: var(--spacing-xl, 2rem);
}

.system-card {
    background: 
        var(--gradient-glass),
        rgba(var(--card-category-rgb, 38, 198, 218), 0.08);
    border: 1px solid rgba(var(--card-category-rgb, 38, 198, 218), 0.25);
    border-radius: var(--border-radius-xl, 16px);
    backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    min-height: 400px;
}

.system-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        var(--card-category-color, var(--color-teal)), 
        var(--color-coral), 
        var(--color-lavender)
    );
    opacity: 0.8;
}

.system-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 
                0 0 30px rgba(var(--card-category-rgb, 38, 198, 218), 0.2);
}

/* System Card Variants */
.system-card.deployed {
    --card-category-rgb: 76, 175, 80;
    --card-category-color: var(--color-mint);
}

.system-card.in_development {
    --card-category-rgb: 255, 193, 7;
    --card-category-color: var(--color-yellow);
}

.system-card.testing {
    --card-category-rgb: 255, 138, 128;
    --card-category-color: var(--color-coral);
}

.system-card.featured {
    --card-category-rgb: 179, 157, 219;
    --card-category-color: var(--color-lavender);
}

/* System Card Content */
.system-card-header {
    padding: var(--spacing-lg, 1.5rem);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.system-card-badges {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md, 1rem);
}

.system-id-badge {
    font-family: var(--font-code);
    font-size: 0.7rem;
    padding: var(--spacing-xs, 0.5rem) var(--spacing-sm, 0.75rem);
    background: rgba(var(--card-category-rgb, 38, 198, 218), 0.2);
    border: 1px solid rgba(var(--card-category-rgb, 38, 198, 218), 0.4);
    border-radius: var(--border-radius-full, 50px);
    color: var(--card-category-color, var(--color-teal));
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
}

.system-status-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs, 0.5rem);
    font-size: 0.8rem;
    color: var(--card-category-color, var(--color-teal));
    font-weight: 500;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--card-category-color, var(--color-teal));
    animation: pulse 2s infinite;
}

.system-card-title {
    font-family: var(--font-heading);
    font-size: 1.3rem;
    color: var(--color-text);
    margin: 0 0 var(--spacing-sm, 0.75rem) 0;
    line-height: 1.2;
}

.system-card-subtitle {
    color: var(--color-text-secondary);
    font-size: 0.9rem;
    margin: 0;
}

.system-card-body {
    padding: var(--spacing-lg, 1.5rem);
    flex: 1;
    display: flex;
    flex-direction: column;
}

.system-card-excerpt {
    color: var(--color-text-secondary);
    line-height: 1.5;
    margin-bottom: var(--spacing-lg, 1.5rem);
    flex: 1;
}

.system-card-metrics {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md, 1rem);
    margin-bottom: var(--spacing-lg, 1.5rem);
    padding: var(--spacing-md, 1rem);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--border-radius-md, 8px);
}

.metric-item {
    text-align: center;
}

.metric-value {
    display: block;
    font-family: var(--font-code);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--card-category-color, var(--color-teal));
    margin-bottom: var(--spacing-xs, 0.5rem);
}

.metric-label {
    font-size: 0.7rem;
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.system-technologies {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs, 0.5rem);
    margin-bottom: var(--spacing-lg, 1.5rem);
}

.tech-badge {
    background: rgba(var(--card-category-rgb, 179, 157, 219), 0.15);
    color: var(--color-lavender);
    padding: var(--spacing-xs, 0.5rem) var(--spacing-sm, 0.75rem);
    border-radius: var(--border-radius-sm, 4px);
    font-size: 0.7rem;
    font-weight: 500;
    border: 1px solid rgba(var(--card-category-rgb, 179, 157, 219), 0.3);
    transition: all 0.3s ease;
}

.tech-badge:hover {
    background: rgba(var(--card-category-rgb, 179, 157, 219), 0.25);
    transform: translateY(-1px);
}

.system-card-footer {
    padding: var(--spacing-lg, 1.5rem);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.progress-section {
    flex: 1;
    margin-right: var(--spacing-md, 1rem);
}

.progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-xs, 0.5rem);
}

.progress-label {
    font-size: 0.7rem;
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.progress-percentage {
    font-family: var(--font-code);
    font-size: 0.8rem;
    color: var(--card-category-color, var(--color-teal));
    font-weight: 600;
}

.progress-bar {
    height: 4px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, 
        var(--card-category-color, var(--color-teal)), 
        rgba(var(--card-category-rgb, 38, 198, 218), 0.8)
    );
    border-radius: 2px;
    transition: width 1.5s ease;
}

.system-actions {
    display: flex;
    gap: var(--spacing-sm, 0.75rem);
}

.action-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs, 0.5rem);
    padding: var(--spacing-sm, 0.75rem) var(--spacing-md, 1rem);
    background: rgba(var(--card-category-rgb, 38, 198, 218), 0.1);
    border: 1px solid rgba(var(--card-category-rgb, 38, 198, 218), 0.3);
    border-radius: var(--border-radius-md, 8px);
    color: var(--card-category-color, var(--color-teal));
    text-decoration: none;
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.3s ease;
}

.action-btn:hover {
    background: rgba(var(--card-category-rgb, 38, 198, 218), 0.2);
    color: var(--card-category-color, var(--color-teal));
    transform: translateY(-1px);
}

.action-btn.primary {
    background: var(--card-category-color, var(--color-teal));
    color: var(--color-bg-primary);
}

.action-btn.primary:hover {
    background: var(--card-category-color, var(--color-teal));
    color: var(--color-bg-primary);
    box-shadow: 0 4px 12px rgba(var(--card-category-rgb, 38, 198, 218), 0.4);
}

/* Filter Section */
.filter-section {
    margin-bottom: var(--spacing-md, 1rem);
}

.filter-group {
    margin-bottom: var(--spacing-md, 1rem);
}

.filter-title {
    font-size: 0.9rem;
    color: var(--color-text);
    margin-bottom: var(--spacing-sm, 0.75rem);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.filter-options {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs, 0.5rem);
}

.filter-option {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm, 0.75rem);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--border-radius-md, 8px);
    transition: all 0.3s ease;
    text-decoration: none;
    color: var(--color-text-secondary);
    font-size: 0.8rem;
}

.filter-option:hover,
.filter-option.active {
    background: rgba(38, 198, 218, 0.1);
    color: var(--color-teal);
    transform: translateX(4px);
}

.filter-count {
    font-family: var(--font-code);
    font-size: 0.7rem;
    padding: var(--spacing-xs, 0.5rem);
    background: rgba(38, 198, 218, 0.2);
    border-radius: var(--border-radius-sm, 4px);
    color: var(--color-teal);
}

/* Search and Controls */
.search-controls {
    margin-bottom: var(--spacing-lg, 1.5rem);
}

.search-input {
    width: 100%;
    padding: var(--spacing-md, 1rem);
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius-lg, 12px);
    color: var(--color-text);
    font-size: 0.9rem;
    backdrop-filter: blur(10px);
}

.search-input:focus {
    outline: none;
    border-color: var(--color-teal);
    box-shadow: 0 0 0 2px rgba(38, 198, 218, 0.2);
}

.search-input::placeholder {
    color: var(--color-text-tertiary);
}

/* Active Filters */
.active-filters {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs, 0.5rem);
    margin-bottom: var(--spacing-lg, 1.5rem);
}

.active-filter {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs, 0.5rem);
    padding: var(--spacing-xs, 0.5rem) var(--spacing-sm, 0.75rem);
    background: rgba(38, 198, 218, 0.2);
    color: var(--color-teal);
    border-radius: var(--border-radius-full, 50px);
    font-size: 0.7rem;
    font-weight: 500;
}

.filter-remove {
    cursor: pointer;
    opacity: 0.7;
}

.filter-remove:hover {
    opacity: 1;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: var(--spacing-xxl, 4rem);
    color: var(--color-text-secondary);
}

.empty-state .fas {
    font-size: 4rem;
    margin-bottom: var(--spacing-lg, 1.5rem);
    opacity: 0.3;
}

/* Responsive Design */
@media (max-width: 1200px) {
    .systems-list-layout {
        grid-template-columns: 280px 1fr;
        gap: var(--spacing-lg, 1.5rem);
    }
    
    .systems-grid {
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    }
}

@media (max-width: 991px) {
    .systems-list-layout {
        grid-template-columns: 1fr;
        gap: var(--spacing-md, 1rem);
    }
    
    .systems-sidebar {
        position: static;
        order: 2;
        max-height: none;
    }
    
    .systems-grid {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: var(--spacing-lg, 1.5rem);
    }
}

@media (max-width: 767px) {
    .systems-grid {
        grid-template-columns: 1fr;
    }
    
    .system-card-metrics {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .system-actions {
        flex-direction: column;
        gap: var(--spacing-sm, 0.75rem);
    }
}
</style>
{% endblock %}

{% block systems_content %}
<div class="systems-list-container">

    <!-- Header Section -->
    <div class="unified-dashboard-container teal" style="margin-bottom: var(--spacing-xl, 2rem);">
        <div class="unified-container-header">
            <div class="unified-featured-badge">
                <i class="fas fa-th-large"></i>
                <span>Systems Overview</span>
            </div>
            
            <h1 class="unified-container-title" style="margin-bottom: var(--spacing-sm, 0.75rem);">All Systems</h1>
            <p class="unified-container-subtitle">{{ total_systems }} systems across {{ system_types|length }} categories</p>
        </div>

        <!-- Quick Stats -->
        <div class="dashboard-grid grid-4-col" style="margin: 0;">
            <div class="metric-content">
                <div class="metric-value" data-target="{{ quick_stats.deployed_count }}">{{ quick_stats.deployed_count }}</div>
                <div class="metric-label">Deployed</div>
            </div>
            
            <div class="metric-content">
                <div class="metric-value" data-target="{{ quick_stats.featured_count }}">{{ quick_stats.featured_count }}</div>
                <div class="metric-label">Featured</div>
            </div>
            
            <div class="metric-content">
                <div class="metric-value" data-target="{{ quick_stats.in_development_count }}">{{ quick_stats.in_development_count }}</div>
                <div class="metric-label">In Development</div>
            </div>
            
            <div class="metric-content">
                <div class="metric-value" data-target="{{ dashboard_stats.avg_completion|floatformat:0 }}">{{ dashboard_stats.avg_completion|floatformat:0 }}</div>
                <div class="metric-label">Avg Completion %</div>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="systems-list-layout">
        
        <!-- Sidebar -->
        <aside class="systems-sidebar">
            
            <!-- Search -->
            <div class="unified-dashboard-container lavender">
                <div class="unified-container-header">
                    <h3 class="unified-container-title" style="font-size: 1.2rem; margin-bottom: 0;">Search & Filter</h3>
                </div>
                
                <div class="search-controls">
                    <form method="get" id="searchForm">
                        <input type="text" 
                               name="search" 
                               value="{{ request.GET.search }}" 
                               placeholder="Search systems..." 
                               class="search-input">
                        <input type="hidden" name="status" value="{{ request.GET.status }}">
                        <input type="hidden" name="tech" value="{{ request.GET.tech }}">
                        <input type="hidden" name="type" value="{{ request.GET.type }}">
                        <input type="hidden" name="order" value="{{ request.GET.order }}">
                    </form>
                </div>

                <!-- Active Filters -->
                {% if active_filters %}
                <div class="active-filters">
                    {% for filter_type, filter_value in active_filters.items %}
                    <span class="active-filter">
                        {{ filter_type }}: {{ filter_value }}
                        <i class="fas fa-times filter-remove" 
                           data-filter="{{ filter_type|lower }}" 
                           title="Remove filter"></i>
                    </span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <!-- Status Filter -->
            <div class="unified-dashboard-container mint">
                <div class="unified-container-header">
                    <h4 class="unified-container-title" style="font-size: 1rem; margin-bottom: 0;">By Status</h4>
                </div>
                
                <div class="filter-options">
                    <a href="?{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}{% if request.GET.tech %}tech={{ request.GET.tech }}&{% endif %}{% if request.GET.order %}order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if not request.GET.status %}active{% endif %}">
                        <span>All Systems</span>
                        <span class="filter-count">{{ total_systems }}</span>
                    </a>
                    <a href="?status=deployed{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'deployed' %}active{% endif %}">
                        <span>Deployed</span>
                        <span class="filter-count">{{ quick_stats.deployed_count }}</span>
                    </a>
                    <a href="?status=featured{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'featured' %}active{% endif %}">
                        <span>Featured</span>
                        <span class="filter-count">{{ quick_stats.featured_count }}</span>
                    </a>
                    <a href="?status=in_development{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'in_development' %}active{% endif %}">
                        <span>In Development</span>
                        <span class="filter-count">{{ quick_stats.in_development_count }}</span>
                    </a>
                    <a href="?status=high_priority{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'high_priority' %}active{% endif %}">
                        <span>High Priority</span>
                        <span class="filter-count">{{ quick_stats.high_priority_count }}</span>
                    </a>
                    <a href="?status=with_metrics{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'with_metrics' %}active{% endif %}">
                        <span>With Performance Data</span>
                        <span class="filter-count">{{ quick_stats.with_performance_count }}</span>
                    </a>
                    <a href="?status=recent{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.status == 'recent' %}active{% endif %}">
                        <span>Recently Updated</span>
                        <span class="filter-count">{{ quick_stats.recently_updated_count }}</span>
                    </a>
                </div>
            </div>

            <!-- Technology Filter -->
            {% if technologies %}
            <div class="unified-dashboard-container yellow">
                <div class="unified-container-header">
                    <h4 class="unified-container-title" style="font-size: 1rem; margin-bottom: 0;">By Technology</h4>
                </div>
                
                <div class="filter-options">
                    {% for tech in technologies|slice:":8" %}
                    <a href="?tech={{ tech.slug }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.tech == tech.slug %}active{% endif %}">
                        <span>{{ tech.name }}</span>
                        <span class="filter-count">{{ tech.usage_count }}</span>
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- System Types Filter -->
            {% if system_types %}
            <div class="unified-dashboard-container coral">
                <div class="unified-container-header">
                    <h4 class="unified-container-title" style="font-size: 1rem; margin-bottom: 0;">By Type</h4>
                </div>
                
                <div class="filter-options">
                    {% for type in system_types %}
                    <a href="?type={{ type.slug }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="filter-option {% if request.GET.type == type.slug %}active{% endif %}">
                        <span>{{ type.name }}</span>
                        <span class="filter-count">{{ type.usage_count }}</span>
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Performance Analytics -->
            {% if performance_analytics %}
            <div class="unified-dashboard-container gunmetal">
                <div class="unified-container-header">
                    <h4 class="unified-container-title" style="font-size: 1rem; margin-bottom: 0;">Performance</h4>
                </div>
                
                <div class="metric-content">
                    <div class="metric-value">{{ performance_analytics.avg_performance|floatformat:1 }}</div>
                    <div class="metric-label">Avg Performance</div>
                </div>
                
                <div class="metric-content">
                    <div class="metric-value">{{ performance_analytics.avg_uptime|floatformat:1 }}%</div>
                    <div class="metric-label">Avg Uptime</div>
                </div>
                
                <div class="metric-content">
                    <div class="metric-value">{{ performance_analytics.total_daily_users|default:0 }}</div>
                    <div class="metric-label">Total Daily Users</div>
                </div>
            </div>
            {% endif %}

        </aside>

        <!-- Main Content -->
        <main class="systems-main-content">
            
            <!-- Sort Controls -->
            <div class="unified-dashboard-container navy" style="margin-bottom: var(--spacing-lg, 1.5rem);">
                <div class="search-controls">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-md, 1rem);">
                        <div style="display: flex; align-items: center; gap: var(--spacing-md, 1rem);">
                            <span style="color: var(--color-text-secondary); font-size: 0.9rem;">Sort by:</span>
                            <div style="display: flex; gap: var(--spacing-sm, 0.75rem); flex-wrap: wrap;">
                                <a href="?order=recent{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}" 
                                   class="filter-option {% if request.GET.order == 'recent' or not request.GET.order %}active{% endif %}" style="padding: var(--spacing-xs, 0.5rem) var(--spacing-md, 1rem);">
                                    <i class="fas fa-clock"></i> Recent
                                </a>
                                <a href="?order=name{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}" 
                                   class="filter-option {% if request.GET.order == 'name' %}active{% endif %}" style="padding: var(--spacing-xs, 0.5rem) var(--spacing-md, 1rem);">
                                    <i class="fas fa-sort-alpha-down"></i> Name
                                </a>
                                <a href="?order=completion{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}" 
                                   class="filter-option {% if request.GET.order == 'completion' %}active{% endif %}" style="padding: var(--spacing-xs, 0.5rem) var(--spacing-md, 1rem);">
                                    <i class="fas fa-percentage"></i> Completion
                                </a>
                                <a href="?order=performance{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}" 
                                   class="filter-option {% if request.GET.order == 'performance' %}active{% endif %}" style="padding: var(--spacing-xs, 0.5rem) var(--spacing-md, 1rem);">
                                    <i class="fas fa-tachometer-alt"></i> Performance
                                </a>
                            </div>
                        </div>
                        <div style="color: var(--color-text-secondary); font-size: 0.9rem;">
                            Showing {{ systems|length }} of {{ total_systems }} systems
                        </div>
                    </div>
                </div>
            </div>

            <!-- Systems Grid -->
            {% if systems %}
            <div class="systems-grid">
                {% for system in systems %}
                <article class="system-card {{ system.status }}{% if system.featured %} featured{% endif %}">
                    
                    <!-- Card Header -->
                    <header class="system-card-header">
                        <div class="system-card-badges">
                            <span class="system-id-badge">{{ system.system_id|default:"SYS-"|add:system.id|stringformat:"03d" }}</span>
                            <div class="system-status-badge">
                                <span class="status-dot"></span>
                                {{ system.get_status_display }}
                            </div>
                        </div>
                        
                        <h3 class="system-card-title">{{ system.title }}</h3>
                        {% if system.system_type %}
                        <p class="system-card-subtitle">{{ system.system_type.name }}</p>
                        {% endif %}
                    </header>

                    <!-- Card Body -->
                    <div class="system-card-body">
                        {% if system.excerpt %}
                        <p class="system-card-excerpt">{{ system.excerpt|truncatewords:25 }}</p>
                        {% endif %}

                        <!-- Enhanced Metrics -->
                        <div class="system-card-metrics">
                            <div class="metric-item">
                                <span class="metric-value">{{ system.completion_percent|default:0 }}%</span>
                                <span class="metric-label">Complete</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value">{{ system.get_complexity_display }}</span>
                                <span class="metric-label">Complexity</span>
                            </div>
                            <div class="metric-item">
                                {% if system.performance_score %}
                                <span class="metric-value">{{ system.performance_score }}</span>
                                <span class="metric-label">Performance</span>
                                {% else %}
                                <span class="metric-value">{{ system.technologies.count }}</span>
                                <span class="metric-label">Technologies</span>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Technologies -->
                        {% if system.technologies.exists %}
                        <div class="system-technologies">
                            {% for tech in system.technologies.all|slice:":4" %}
                            <span class="tech-badge">{{ tech.name }}</span>
                            {% endfor %}
                            {% if system.technologies.count > 4 %}
                            <span class="tech-badge" style="opacity: 0.7;">+{{ system.technologies.count|add:"-4" }}</span>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Card Footer -->
                    <footer class="system-card-footer">
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-label">Progress</span>
                                <span class="progress-percentage">{{ system.completion_percent|default:0 }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ system.completion_percent|default:0 }}%"></div>
                            </div>
                        </div>
                        
                        <div class="system-actions">
                            <a href="{{ system.get_absolute_url }}" class="action-btn primary">
                                <i class="fas fa-eye"></i>
                                <span>View</span>
                            </a>
                            {% if system.github_url %}
                            <a href="{{ system.github_url }}" target="_blank" class="action-btn">
                                <i class="fab fa-github"></i>
                            </a>
                            {% endif %}
                            {% if system.live_url %}
                            <a href="{{ system.live_url }}" target="_blank" class="action-btn">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                            {% endif %}
                        </div>
                    </footer>
                </article>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <i class="fas fa-search"></i>
                <h3>No systems found</h3>
                <p>Try adjusting your search criteria or filters.</p>
                <a href="{% url 'projects:system_list' %}" class="action-btn primary" style="margin-top: var(--spacing-lg, 1.5rem);">
                    <i class="fas fa-refresh"></i>
                    Clear Filters
                </a>
            </div>
            {% endif %}

            <!-- Pagination -->
            {% if is_paginated %}
            <div class="unified-dashboard-container teal">
                <div style="display: flex; justify-content: center; align-items: center; gap: var(--spacing-md, 1rem);">
                    {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="action-btn">
                        <i class="fas fa-chevron-left"></i>
                        Previous
                    </a>
                    {% endif %}
                    
                    <span style="color: var(--color-text-secondary); font-size: 0.9rem;">
                        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                    </span>
                    
                    {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.tech %}&tech={{ request.GET.tech }}{% endif %}{% if request.GET.order %}&order={{ request.GET.order }}{% endif %}" 
                       class="action-btn">
                        Next
                        <i class="fas fa-chevron-right"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
            {% endif %}

        </main>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="{% static 'projects/js/dashboard_panel.js' %}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize progress bars animation
    setTimeout(() => {
        const progressFills = document.querySelectorAll('.progress-fill');
        progressFills.forEach((fill, index) => {
            const width = fill.style.width;
            fill.style.width = '0%';
            setTimeout(() => {
                fill.style.transition = 'width 1.5s ease';
                fill.style.width = width;
            }, index * 100);
        });
    }, 500);

    // Search form auto-submit
    const searchInput = document.querySelector('.search-input');
    let searchTimeout;
    
    searchInput.addEventListener('input', function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            document.getElementById('searchForm').submit();
        }, 800);
    });

    // Filter removal
    document.querySelectorAll('.filter-remove').forEach(remove => {
        remove.addEventListener('click', function() {
            const filterType = this.dataset.filter;
            const url = new URL(window.location);
            
            // Remove the specific filter parameter
            const paramMap = {
                'status': 'status',
                'technology': 'tech',
                'type': 'type',
                'complexity': 'complexity',
                'search': 'search'
            };
            
            if (paramMap[filterType]) {
                url.searchParams.delete(paramMap[filterType]);
            }
            
            window.location.href = url.toString();
        });
    });

    // Card hover effects
    document.querySelectorAll('.system-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(-6px)';
        });
    });

    console.log('🚀 Enhanced System List loaded successfully!');
});
</script>
{% endblock %}