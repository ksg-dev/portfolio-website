{% load static %}

<div class="card post-card bg-dark bg-opacity-50 h-100">
    <!-- Post Image/Placeholder -->
    {% if post.thumbnail %}
    <div class="post-image">
        <img src="{{ post.thumbnail.url }}" alt="{{ post.title }}" class="img-fluid">
    </div>
    {% else %}
    <div class="post-image post-image-pattern d-flex justify-content-center align-items-center">
        <div class="image-placeholder" style="background-color: {{ post.category.color }}20;">
            {% if post.category.icon %}
            <i class="fas {{ post.category.icon }}" style="color: {{ post.category.color }};"></i>
            {% else %}
            <span class="image-icon" style="color: {{ post.category.color }};">{{ post.get_icon_text }}</span>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    <div class="card-body position-relative pt-4 pb-0">
        <!-- Category Hexagon -->
        <div class="category-hex position-absolute" style="--category-color: {{ post.category.color|default:'var(--color-cyan)' }}; top: -20px; left: 20px;">
            <a href="{% url 'blog:category' slug=post.category.slug %}">
                {% if post.category.icon %}
                <i class="fas {{ post.category.icon }}"></i>
                {% else %}
                {{ post.category.code }}
                {% endif %}
            </a>
        </div>
        
        <!-- Post Content -->
        <h3 class="card-title h5 mb-3">
            <a href="{% url 'blog:post_detail' slug=post.slug %}" class="text-white">{{ post.title }}</a>
        </h3>
        
        <p class="card-text small text-secondary mb-3">{{ post.excerpt }}</p>
        
        <!-- Post Tags (Pills) -->
        <div class="post-tags mb-3">
            {% for tag in post.tags.all|slice:":2" %}
            <a href="{% url 'blog:tag' slug=tag.slug %}" 
               class="tag-pill me-2 d-inline-block small {% if highlight_tag and tag.id == highlight_tag.id %}bg-opacity-25 bg-primary{% endif %}">
                {{ tag.name }}
            </a>
            {% endfor %}
            {% if post.tags.count > 2 %}
            <span class="small text-secondary">+{{ post.tags.count|add:"-2" }}</span>
            {% endif %}
        </div>
        
        <!-- Post Meta -->
        <div class="post-meta mb-3">
            <span class="post-date small text-secondary">{{ post.published_date|date:"M d, Y"|upper }}</span>
        </div>
        
        <!-- Access Link -->
        <div class="post-divider mb-3"></div>
        <a href="{% url 'blog:post_detail' slug=post.slug %}" class="post-link d-flex justify-content-between align-items-center pb-3">
            <span>ACCESS TRANSMISSION</span>
            <span class="arrow">â†’</span>
        </a>
    </div>
</div>