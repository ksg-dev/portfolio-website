<!----
 * AURA DataLogs - Year Archive Template
 * File: blog/templates/blog/archive_year.html
---->

{% extends "blog/datalogs_base.html" %}
{% load static %}
{% load aura_filters %}
{% load aura_components %}
{% load datalog_tags %}

{% block title %}{{ page_title }} | AURA{% endblock %}
{% block meta_description %}{{ page_description }}{% endblock %}

{% block datalogs_title %}{{ current_year }} Archive{% endblock %}

{% block datalogs_css %}
<link rel="stylesheet" href="{% static 'blog/css/datalogs-consolidated.css' %}">
{% endblock %}

{% block datalogs_body_class %}archive-year-view{% endblock %}

{% block datalogs_breadcrumbs %}
<i class="fas fa-chevron-right breadcrumb-separator"></i>
<a href="{% url 'blog:archive' %}" class="breadcrumb-item">Archive</a>
<i class="fas fa-chevron-right breadcrumb-separator"></i>
<span class="breadcrumb-item active">{{ current_year }}</span>
{% endblock %}

{% block datalogs_content %}

<!-- Year Archive Header -->
<section class="year-archive-header">
    {% section_header title=current_year subtitle="DataLog entries for this year" icon="fas fa-calendar" show_metrics=True metric_1_value=posts.count metric_1_label="Posts" metric_1_icon="fas fa-database" metric_2_value=posts.dates.month.count|default:"0" metric_2_label="Active Months" metric_2_icon="fas fa-calendar-alt" metric_3_value=posts.categories.count|default:"0" metric_3_label="Categories" metric_3_icon="fas fa-folder" %}
</section>

<!-- Year Timeline -->
<section class="year-timeline-section">
    {% archive_timeline posts=posts style='compact' group_by='month' show_stats=True show_navigation=True year=current_year auto_expand=False max_posts_per_group=8 %}
</section>

<!-- Year Navigation -->
<section class="year-navigation-section">
    <div class="glass-card year-nav-card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-calendar-week"></i>
                {{ current_year }} Monthly Navigation
            </h3>
        </div>
        <div class="card-content">
            {% archive_navigation_data posts current_year as nav_data %}
            
            {% if nav_data.years.0.months %}
            <div class="year-months-navigation">
                {% for month_data in nav_data.years.0.months %}
                <a href="{% url 'blog:archive_month' year=current_year month=month_data.number %}" 
                   class="month-nav-card glass-card">
                    <div class="card-content">
                        <h4 class="month-name">{{ month_data.name }}</h4>
                        <div class="month-stats">
                            <span class="month-count">{{ month_data.count }} post{{ month_data.count|pluralize }}</span>
                            <span class="activity-indicator {{ month_data.count|archive_activity_level }}"></span>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- Other Years -->
            <div class="other-years-nav">
                <h4 class="nav-section-title">Other Years</h4>
                <div class="other-years-grid">
                    {% for year_data in nav_data.years %}
                    {% if year_data.year != current_year %}
                    <a href="{% url 'blog:archive_year' year=year_data.year %}" class="year-nav-item breadcrumb-item">
                        <span class="nav-year">{{ year_data.year }}</span>
                        <span class="nav-count">{{ year_data.total_posts }}</span>
                    </a>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block datalogs_js %}
<script src="{% static 'blog/js/datalogs-consolidated.js' %}"></script>
{% endblock %}