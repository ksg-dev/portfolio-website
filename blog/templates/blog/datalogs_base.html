<!----
 * AURA Portfolio - Blog/Datalogs App Base Template
 * Advanced User Repository & Archive - Complete Foundation
 * Version: 2.0.1 - Optimized for Component Architecture
---->

{% extends "base.html" %}
{% load static %}
{% load code_filters %}
{% load blog_tags %}

{% block extra_css %}
<!-- DataLogs App Specific Styles -->
<link rel="stylesheet" href="{% static 'css/components/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'css/components/forms.css' %}">
<link rel="stylesheet" href="{% static 'css/components/glass-cards.css' %}">
<link rel="stylesheet" href="{% static 'blog/css/datalogs.css' %}">

{% pygments_css %}
{% block datalogs_css %}{% endblock %}
{% endblock %}

{% block body_class %}datalogs-interface {% block datalogs_body_class %}{% endblock %}{% endblock %}

{% block content %}
<!-- DataLogs HUD Interface -->
<div class="datalogs-interface-container">
    
    <!-- DataLogs Sub-Navigation -->
    <section class="datalogs-subnav">
        <div class="container subnav-container">
            <div class="subnav-left">
                <div class="subnav-title">
                    <i class="fas fa-database subnav-title-icon"></i>
                    {% block subnav_title %}DataLogs{% endblock %}
                </div>
                
                <nav class="subnav-links">
                    <a href="{% url 'blog:post_list' %}" class="subnav-link {% if request.resolver_match.view_name == 'blog:post_list' %}active{% endif %}">
                        <i class="fas fa-list subnav-icon"></i>
                        <span>All Logs</span>
                    </a>
                    <a href="{% url 'blog:archive' %}" class="subnav-link {% if 'archive' in request.resolver_match.view_name %}active{% endif %}">
                        <i class="fas fa-calendar subnav-icon"></i>
                        <span>Archive</span>
                    </a>
                    <a href="{% url 'blog:tags' %}" class="subnav-link {% if 'tag' in request.resolver_match.view_name %}active{% endif %}">
                        <i class="fas fa-tags subnav-icon"></i>
                        <span>Tags</span>
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'blog:dashboard' %}" class="subnav-link {% if 'dashboard' in request.resolver_match.view_name %}active{% endif %}">
                        <i class="fas fa-chart-line subnav-icon"></i>
                        <span>Dashboard</span>
                    </a>
                    {% endif %}
                </nav>
            </div>
            
            <div class="subnav-right">
                <div class="subnav-stats">
                    <div class="stat-item">
                        <i class="fas fa-file-alt"></i>
                        <span class="stat-value">{{ total_logs|default:"24" }}</span>
                        <span class="stat-label">Logs</span>
                    </div>
                    <span class="stat-separator">|</span>
                    <div class="stat-item">
                        <i class="fas fa-folder"></i>
                        <span class="stat-value">{{ categories.count|default:"5" }}</span>
                        <span class="stat-label">Categories</span>
                    </div>
                </div>
                
                <div class="subnav-actions">
                    {% if user.is_authenticated %}
                    <a href="{% url 'blog:post_create' %}" class="subnav-action-btn">
                        <i class="fas fa-plus"></i>
                        <span>New Log</span>
                    </a>
                    {% endif %}
                    <a href="{% url 'blog:search' %}" class="subnav-action-btn">
                        <i class="fas fa-search"></i>
                        <span>Search</span>
                    </a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- DataLogs Header Section -->
    <section class="datalogs-header-section">
        <div class="container">
            <div class="glass-card datalogs-header-card">
                
                <!-- System Status Bar -->
                <div class="datalogs-status-bar">
                    <div class="status-left">
                        <div class="system-status">
                            <div class="status-indicator operational pulse-effect"></div>
                            <span class="status-text">DATALOG SYSTEM ONLINE</span>
                        </div>
                        <div class="system-metrics">
                            <span class="metric-item">
                                <span class="metric-value">{{ total_logs|default:"24" }}</span>
                                <span class="metric-label">Total Entries</span>
                            </span>
                            <span class="metric-separator">|</span>
                            <span class="metric-item">
                                <span class="metric-value">{{ published_logs|default:"18" }}</span>
                                <span class="metric-label">Published</span>
                            </span>
                            {% if user.is_authenticated %}
                            <span class="metric-separator">|</span>
                            <span class="metric-item">
                                <span class="metric-value">{{ draft_logs|default:"3" }}</span>
                                <span class="metric-label">Drafts</span>
                            </span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="status-right">
                        <div class="timestamp-display">
                            <i class="fas fa-clock me-2"></i>
                            <span data-timestamp="datetime">{% now "Y-m-d H:i:s" %} UTC</span>
                        </div>
                    </div>
                </div>
                
                <!-- DataLogs Navigation -->
                <div class="datalogs-nav-container">
                    <h1 class="datalogs-title display-title">
                        {% block datalogs_title %}[ DATALOG ARCHIVES ]{% endblock %}
                    </h1>
                    <p class="datalogs-subtitle system-text">
                        {% block datalogs_subtitle %}Development Insights & Technical Documentation{% endblock %}
                    </p>
                    
                    <!-- Category Navigation HUD -->
                    {% block category_nav %}
                    <div class="category-hud-nav">
                        <a href="{% url 'blog:post_list' %}" class="category-hexagon {% if not current_category and not current_tag %}active{% endif %}" title="All DataLogs">
                            <div class="hex-content">
                                <div class="hex-icon"><i class="fas fa-database"></i></div>
                                <div class="hex-label">ALL</div>
                            </div>
                        </a>
                        
                        {% for category in categories %}
                        <a href="{% url 'blog:category' slug=category.slug %}" 
                           class="category-hexagon {% if current_category == category.slug %}active{% endif %}"
                           title="{{ category.name }}"
                           style="--category-color: {{ category.color|default:'#26c6da' }};">
                            <div class="hex-content">
                                <div class="hex-icon">
                                    {% if category.icon %}
                                    <i class="fas {{ category.icon }}"></i>
                                    {% else %}
                                    <span class="hex-code">{{ category.code|default:"LOG" }}</span>
                                    {% endif %}
                                </div>
                                <div class="hex-label">{{ category.code|default:"LOG" }}</div>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                    {% endblock %}
                </div>
            </div>
        </div>
    </section>
    
    <!-- DataLogs Content Area -->
    <main class="datalogs-main-content">
        <div class="container">
            
            <!-- DataLogs Filters & Search -->
            {% block datalogs_filters %}{% endblock %}
            
            <!-- Main DataLogs Content -->
            <div class="datalogs-content-area">
                {% block datalogs_content %}
                <!-- Default content - will be overridden in child templates -->
                <div class="glass-card info-card">
                    <h3>DataLog System Ready</h3>
                    <p>Awaiting content implementation...</p>
                </div>
                {% endblock %}
            </div>
            
            <!-- DataLogs Pagination -->
            {% block datalogs_pagination %}
            {% if is_paginated %}
            <div class="datalogs-pagination">
                {% include 'components/pagination.html' %}
            </div>
            {% endif %}
            {% endblock %}
            
        </div>
    </main>
    
    <!-- DataLogs Sidebar (Optional) -->
    {% block datalogs_sidebar %}{% endblock %}
    
</div>
{% endblock %}

{% block extra_js %}
<!-- DataLogs App Scripts -->
<script src="{% static 'blog/js/datalogs.js' %}"></script>
{% block datalogs_js %}{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize DataLogs interface
    if (typeof initDataLogsInterface === 'function') {
        initDataLogsInterface();
    }
    
    // Subnav mobile responsiveness
    const subnavContainer = document.querySelector('.subnav-container');
    if (window.innerWidth <= 767) {
        subnavContainer.classList.add('mobile-view');
    }
    
    // Real-time timestamp updates
    const timestamps = document.querySelectorAll('[data-timestamp]');
    if (timestamps.length > 0) {
        updateTimestamps();
        setInterval(updateTimestamps, 1000);
    }
    
    function updateTimestamps() {
        const now = new Date();
        timestamps.forEach(element => {
            const format = element.dataset.timestamp || 'datetime';
            
            switch (format) {
                case 'time':
                    element.textContent = now.toLocaleTimeString('en-US', { 
                        hour12: false, 
                        timeZone: 'UTC' 
                    }) + ' UTC';
                    break;
                case 'date':
                    element.textContent = now.toISOString().split('T')[0];
                    break;
                case 'datetime':
                default:
                    element.textContent = now.toISOString().slice(0, 19).replace('T', ' ') + ' UTC';
                    break;
            }
        });
    }
    
    // Initialize category hexagon animations
    const hexagons = document.querySelectorAll('.category-hexagon');
    hexagons.forEach((hex, index) => {
        hex.style.animationDelay = `${index * 0.1}s`;
        hex.classList.add('fade-in-up');
    });
    
    // App-specific initialization
    {% block datalogs_inline_js %}{% endblock %}
});
</script>
{% endblock %}